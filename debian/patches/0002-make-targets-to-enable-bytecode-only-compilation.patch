From: Stefano Zacchiroli <zack@upsilon.cc>
Date: Sat, 3 May 2008 22:39:34 +0200
Subject: [PATCH] make targets to enable bytecode only compilation

Signed-off-by: Stefano Zacchiroli <zack@upsilon.cc>
---
 Makefile          |   12 ++++++++++++
 extended/Makefile |    1 +
 lib/Makefile      |    1 +
 3 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/Makefile b/Makefile
index 04a3d60..746dca2 100644
--- a/Makefile
+++ b/Makefile
@@ -17,3 +17,15 @@ uninstall:
 clean:
 	@cd lib && $(MAKE) clean
 	@cd extended && $(MAKE) clean
+
+.PHONY: byte
+byte:
+	@cd lib && $(MAKE) $@
+	@cd lib_test && make
+	@cd extended && $(MAKE) $@
+
+.PHONY:	libinstall-byte-code
+libinstall-byte-code:
+	@cd lib && $(MAKE) $@
+	@cd extended && $(MAKE) $@
+
diff --git a/extended/Makefile b/extended/Makefile
index b044c16..dc777ee 100644
--- a/extended/Makefile
+++ b/extended/Makefile
@@ -114,6 +114,7 @@ THREADS = yes
 ANNOTATE = true
 
 all: byte-code-library native-code-library
+byte: byte-code-library
 
 LIBINSTALL_FILES = \
   core_extended.cmi core_extended.cma core_extended.cmxa core_extended.a libcore_extended_stubs.a dllcore_extended_stubs.so
diff --git a/lib/Makefile b/lib/Makefile
index ab1c8d8..d2af679 100644
--- a/lib/Makefile
+++ b/lib/Makefile
@@ -210,6 +210,7 @@ THREADS = yes
 ANNOTATE = true
 
 all: byte-code-library native-code-library
+byte: byte-code-library
 
 LIBINSTALL_FILES = \
   core.cmi core.cma core.cmxa core.a libcore_stubs.a dllcore_stubs.so
-- 
